<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link href="style.css" rel="stylesheet">
    <link class="jsbin" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1/themes/base/jquery-ui.css"
        rel="stylesheet" type="text/css" />
    <script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js"></script>
    <script class="jsbin" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.0/jquery-ui.min.js"></script>
    <script src="./script.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html-to-image/1.11.11/html-to-image.js"></script>


</head>


<body>
    <div id="test" class="d-flex flex-row">

        <nav>
            <button type="button" id="btn-image" class="btn btn-primary ">Générer</button>
            <button type="button" id="btn-reset" class="btn btn-primary ">Reset</button>
        </nav>

        <div id="scene" class="d-flex flex-column-reverse">

            <div class="d-flex bloc-left">
                <div class="logo d-flex justify-content-center align-items-center">
                    <button type="button" class="btn btn-primary file-upload">Upload</button>
                    <input id="file-input" type='file' class="inputFile visuallyhidden" onchange="readURL(this);"
                        title="" />
                    <img id="blah" src="#" alt="" />
                </div>
                <div class='d-flex flex-column justify-content-around'>

                    <div class="text-1">
                        <div  class="input-sizer text-1-input">
                            <input  type="text" onInput="this.parentNode.dataset.value = this.value" size="4"
                                placeholder="Text 1">
                        </div>
                    </div>
                    <div class="text-2">
                        <div class="input-sizer text-2-input">
                            <input type="text" onInput="this.parentNode.dataset.value = this.value" size="4"
                                placeholder="Text 2">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

</body>

<script>

    $('.file-upload').on('click', function (e) {
        e.preventDefault();
        $('#file-input').trigger('click');
    });


    $('#btn-image').on('click', function (e) {
        e.preventDefault();

        htmlToImage.toPng(document.getElementById('scene'), { quality: 0.99, width: 1920, height: 1080, backgroundColor: "rgba(255,255,255,0)" })
            .then(function (dataUrl) {
                var link = document.createElement('a');
                link.download = 'my-image-name.jpeg';
                link.href = dataUrl;
                link.click();
            });
    });

    
    $('#btn-reset').on('click', function (e) {
        e.preventDefault();
        $('input').val('');
        $('.file-upload').show();
    });

</script>


</html>